@model ModelLayer.MainViewModel.CreateIndicatorValueVM
@{
    ViewBag.Title = "Indicator Entry";
}
@section Styles{
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" integrity="sha512-nMNlpuaDPrqlEls3IX/Q56H36qvBASwb3ipuo3MxeWbsQB1881ox0cRv7UPTgBlriqoynt35KjEwgGUeUXIPnw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
}
<!-- START row-->
<div class="row">
    <div class="col-xl-12">
        @using (Html.BeginForm("IndicatorFieldValue", "Indicator", FormMethod.Post, new { @class = "form-horizontal" }))
        {
            <!-- START card-->

            <div class="card card-default">
                <div class="card-header">
                    <div class="card-title">
                        <br />
                        <h4> Add Indicator Value </h4>
                    </div>
                </div>
                <div class="card-body">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-4">
                                <label for="sel1">Select Project *</label>
                                @Html.DropDownListFor(m => m.Project_ID, new SelectList(Model.comboProjects, "ProjectID", "ProjectName"), new { @class = "select2 form-control " })
                                @Html.ValidationMessageFor(m => m.Project_ID, "", new { @class = "parsley-required", @id = "spanCategory_ID" })
                            </div>
                            <div class="col-lg-4">
                                <label for="sel1">Select Batch/Cycle *</label>
                                @Html.DropDownListFor(m => m.Batch_ID, new SelectList(Model.comboBatch, "BatchID", "BatchName"), "Please Select Batch", new { @class = "select2 form-control " })
                                @Html.ValidationMessageFor(m => m.Batch_ID, "", new { @class = "parsley-required", @id = "spanBatchID" })
                            </div>
                            <div class="col-lg-4">
                                <label for="sel1">Select Indicator *</label>
                                @Html.DropDownListFor(m => m.Indicator_ID, new SelectList(Model.comboIndicator, "IndicatorID", "IndicatorName"), "Please Select Indicator", new { @class = "select2 form-control " })
                                @Html.ValidationMessageFor(m => m.Indicator_ID, "", new { @class = "parsley-required", @id = "spanIndicatorID" })
                            </div>
                        </div>

                        <br />
                        @*<div class="float-right"><input type="button" id="AddStackHolder" value="Add Field" class="btn btn-primary" /></div>*@
                        <br />
                        <br />

                        <input type="hidden" name="HdnTotalrowcnt" id="HdnTotalrowcnt" value="@*@Model.LstprjMileStones.Count*@" />
                        <input type="hidden" name="Hdndeletedrow" id="Hdndeletedrow" value="" />

                        <table class="table table-striped" name="tblIndicator" id="tblIndicator">
                            <thead class="table-info">
                                <tr>
                                    <th data-column-id="id" data-type="numeric">ID</th>
                                    <th data-column-id="Department">Indicator Field Name</th>
                                    <th data-column-id="ContactNo">Indicator Value</th>
                                    <th data-column-id="action"></th>
                                </tr>
                            </thead>
                            <tbody id="tblBodyIndicator">

                                @*<tr id="tblIndicatorRow">
                                        <td>1</td>
                                        <td> <input type="hidden" name="MilestoneDescription[1]" id="MilestoneDescription[1].hdIndicatorFieldID" value="0" /></td>
                                        <td><input class="form-control" type="text" name="MilestoneDescription[1]" required value="MilestoneDescription[1].IndicatorFieldName"  /></td>
                                        <td><input class="form-control" type="text" name="MilestoneDescription[1]" required value="MilestoneDescription[1].IndicatorDataType_ID" /></td>

                                        <td>
                                            <select class="form-control" name="Percentage[1]" value="" style="width:105px;">
                                                <option value="true">Yes</option>
                                                <option value="false">No</option>
                                            </select>
                                        </td>
                                    </tr>*@

                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="required">* Required fields</div>
                <br />
                <div class="card-footer">
                    <div class="clearfix">
                        <div class="float-left">
                            <div class="checkbox c-checkbox">
                                <label>
                                </label>
                            </div>
                        </div>
                        <div class="float-right">
                            <button class="btn btn-primary" type="submit" id="btnnnnCreate"> Create</button>
                        </div>

                    </div>
                </div>
                <!-- END card-->
            </div>
        }
    </div>
</div>
@section Scripts{
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.js" type="text/javascript"></script>
    <script src="~/Content/Template/vendor/bootstrap-colorpicker/dist/js/bootstrap-colorpicker.js"></script>
    <script>
       $(document).ready(function ()
        {

        });

        $("#Project_ID").on('change', function () {
            var _Project_ID = $(this).find("option:selected").val();

                $.ajax({
                     type: 'POST',
                     url: '@Url.Action("ClickProjectComboBox", "Project")',
                     dataType: 'json',
                    data: { Project_ID: _Project_ID },  // Same Parameter with Action
                    success: function (BatchLst) {
                        debugger;
                        $("#Batch_ID").empty();
                        if (BatchLst == 0 || BatchLst ==null) {
                            $("#Batch_ID").prop("disabled", true);
                            $("#Batch_ID").append('<option value="' + 0 + '">' +
                                "Please Select Batch" + '</option>');
                        } else {
                            $("#Batch_ID").prop("disabled", false);
                            $.each(BatchLst, function (i, Aqib) {
                                $("#Batch_ID").append('<option value="' + Aqib.BatchID + '">' +
                                    Aqib.BatchName + '</option>');
                            });
                        }
                 },
                 error: function (ex) {
                     console.log('Failed to Retrieve Batch Data:  ' + ex);
                 }
                });//Ajax_End
        });
        $("#Batch_ID").on('change', function () {

            var obj = {};
            obj.Project_ID = $("#Project_ID").find("option:selected").val();
            obj.Batch_ID = $("#Batch_ID").find("option:selected").val();

            //var Stock = { Project_ID: $("#Project_ID").find("option:selected").val(), Batch_ID: $("#Batch_ID").find("option:selected").val() };
                $.ajax({
                     type: 'POST',
                     url: '@Url.Action("ClickBatchComboBox", "Project")',
                    data: JSON.stringify(obj),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',

                    success: function (IndicatorLst) {
                        $("#Indicator_ID").empty();
                        if (IndicatorLst == 0 || IndicatorLst ==null) {
                            $("#Indicator_ID").prop("disabled", true);
                            $("#Indicator_ID").append('<option value="' + 0 + '">' +
                                "Please Select Indicator" + '</option>');
                        } else {
                            $("#Indicator_ID").prop("disabled", false);
                            $.each(IndicatorLst, function (i, Aqib) {
                                $("#Indicator_ID").append('<option value="' + Aqib.IndicatorID + '">' +
                                    Aqib.IndicatorName + '</option>');
                            });
                        }
                 },
                    error: function (ex) {
                        console.log('Failed to Retrieve Indicator Data:  ' + ex.responseText);
                 }
                });//Ajax_End
            });
        $("#Indicator_ID").on('change', function () {
            _Indicator_ID = $(this).find("option:selected").val();

            $.ajax({
                type: 'POST',
                url: '@Url.Action("ClickIndicatorComboBox", "Indicator")',
                dataType: 'json',
                data: { IndicatorID: _Indicator_ID },  // Same Parameter with Action
                success: function (IndicatorTypeLst) {
                    $("#tblBodyIndicator").empty();
                    debugger;

                    var counter = 0;
                    $.each(IndicatorTypeLst.dataTypeVMLst, function (index, v) {
                        /// do stuff
                      
                        var IndicatorFieldID = '<td style="display:none";><input  name="dataTypeVMLst[' + counter + '].IndicatorFieldID" value="' + v.IndicatorFieldID + '" type="text"  /></td>';
                        var HiddenValue = '';
                        var ResultString = '';

                        ResultString = '<td>';
                        HiddenValue = '<td>';

                        if (v.IndicatorDataType_ID == 1) {
                            ResultString += '<input  class="form-control"    name="dataTypeVMLst[' + counter +'].TEXT"     type="text"  placeholder="Enter Indicator Text" required />'
                            HiddenValue += '<input class="form-control"   name="dataTypeVMLst[' + counter +'].IndicatorDataType_ID" value="' + v.IndicatorDataType_ID + '" type="text"   style="display:none;" />'
                        }else if(v.IndicatorDataType_ID == 2) {
                            ResultString += '<input class="form-control"    name="dataTypeVMLst[' + counter +'].INTEGER" type="number"  placeholder="Enter Indicator Value" />'
                            HiddenValue += '<input class="form-control"   name="dataTypeVMLst[' + counter + '].IndicatorDataType_ID" value="' + v.IndicatorDataType_ID + '" type="text"   style="display:none;" />'
                        } else if (v.IndicatorDataType_ID == 3) {
                            ResultString += '<input class="form-control"  name="dataTypeVMLst[' + counter +'].FLOAT" type="number" placeholder="Enter Indicator Percentage %"  />'
                            HiddenValue += '<input class="form-control"  name="dataTypeVMLst[' + counter + '].IndicatorDataType_ID"  value="' + v.IndicatorDataType_ID + '" type="text"   style="display:none;" />'
                        } else if (v.IndicatorDataType_ID == 4) {
                            ResultString += '<select class="form-control" name="dataTypeVMLst[' + counter + '].BOOL">'
                            ResultString += '<option>Select Yes/No</option>'
                            ResultString += '<option value="Yes">Yes</option>'
                            ResultString += '<option value="No">No</option>'
                            ResultString += '</select>'
                            HiddenValue += '<input class="form-control"  name="dataTypeVMLst[' + counter +'].IndicatorDataType_ID"  value="' + v.IndicatorDataType_ID + '" type="text"   style="display:none;" />'
                        }

                        ResultString += '</td>';
                        HiddenValue += '</td>';

                        $('<tr id="tblIndicatorRow' + counter + '">' +
                            '<td>' + counter + '</td>' +
                            IndicatorFieldID +
                              '<td>' + v.IndicatorFieldName + '</td>' +
                            ResultString +
                            HiddenValue +
                            '</tr>').appendTo('#tblIndicator');

                        counter++;
                        });
                 },
                    error: function (ex) {
                        debugger;
                        console.log('Failed to Retrieve IndicatorDataType List Data:  ' + ex.responseText);
                 }
                });//Ajax_End
            });



        $("#AddRisk").click(function () {
            debugger;
            if ($('#idRiskName').val() == "") {
                $('#spanidRiskName').text('Risk Name should not be blank');
                $('#spanidRiskName').show();
                $('#idRiskName').focus();
                return true;
            }
            if ($('#idRiskStatus').val() == 0) {
                $('#spanidRiskStatus').text('Risk Status should not be blank');
                $('#spanidRiskStatus').show();
                $('#ididRiskStatus').focus();
                return true;
            }
            var trcount = $("#tblRisk tr").length;
            $("#tblRisk").append("<tr>  <td>" + trcount + "</td>         <td>" + $("#idRiskName").val() + "</td>     <td id='" + $("#idRiskStatus").val() + "' >" + $("#idRiskStatus").find("option:selected").text() + "</td> <td><a href='javascript:void(0);' class='remCF2'  onClick ='RemoveDemerits(this);'>Remove</a></td>    </tr>");
            $("#idRiskName").val('');
            $("#idRiskStatus").val('');
        });

        function RemoveDemerits(row) {
            $(row).parent().parent().remove();
        }

        $("#idRiskName").on('change', function () {
            debugger;
            if ($('#idRiskName').val() != "") {
                $('#spanidRiskName').hide();
                return true;
            }
        });
        $("#idRiskStatus").on('change', function () {
            debugger;
            if ($('#idRiskStatus').val() != "") {
                $('#spanidRiskStatus').hide();
                return true;
            }
        });


        $("#AddStackHolder").click(function () {
            debugger;
            if ($('#idStackholderName').val() == "") {
                $('#spanidStackholderName').text('Stackholder Name should not be blank');
                $('#spanidStackholderName').show();
                $('#idStackholderName').focus();
                return true;
            }
            if ($('#idDepartmentName').val() == "") {
                $('#spanidDepartmentName').text('Department Name should not be blank');
                $('#spanidDepartmentName').show();
                $('#idDepartmentName').focus();
                return true;
            } if ($('#idContactNo').val() == "") {
                $('#spanidContactNo').text('Contact No should not be blank');
                $('#spanidContactNo').show();
                $('#idContactNo').focus();
                return true;
            } if ($('#idEmail').val() == "") {
                $('#spanidEmail').text('Email should not be blank');
                $('#spanidEmail').show();
                $('#idEmail').focus();
                return true;
            }


            var trcount = $("#tblStackHolder tr").length;

            $("#tblStackHolder").append("<tr>  <td>" + trcount + "</td>            <td>" + $("#idStackholderName").val() + "</td>      <td>" + $("#idDepartmentName").val() + "</td>         <td>" + $("#idContactNo").val() + "</td>    <td>" + $("#idEmail").val() + "</td>      <td><a href='javascript:void(0);' class='remCF2'  onClick ='RemoveDemerits(this);'>Remove</a></td>    </tr>");
            $("#idStackholderName").val('');
            $("#idDepartmentName").val('');
            $("#idContactNo").val('');
            $("#idEmail").val('');
        });

        function RemoveDemerits(row) {
            $(row).parent().parent().remove();
        }

        $("#idStackholderName").on('change', function () {
            debugger;
            if ($('#idStackholderName').val() != "") {
                $('#spanidStackholderName').hide();
                return true;
            }
        });
        $("#idDepartmentName").on('change', function () {
            debugger;
            if ($('#idDepartmentName').val() != "") {
                $('#spanidDepartmentName').hide();
                return true;
            }
        });
        $("#idContactNo").on('change', function () {
            debugger;
            if ($('#idContactNo').val() != "") {
                $('#spanidContactNo').hide();
                return true;
            }
        });
        $("#idEmail").on('change', function () {
            debugger;
            if ($('#idEmail').val() != "") {
                $('#spanidEmail').hide();
                return true;
            }
        });


        $("#ApprovedBudget").on('change', function () {
            debugger;
            Uvalid();

            //Project Cost
            var _PlannedBudget = $('#PlannedBudget').val();
            var _ApprovedBudget = $('#ApprovedBudget').val();

            debugger;
            if (_ApprovedBudget > _PlannedBudget) {
                $('#spanApprovedBudget').text(' Approved Budget Should not be greater then Planned Budget');
                $('#spanApprovedBudget').show();
                $('#spanApprovedBudget').focus();
                return true;
            } else {
                $('#spanApprovedBudget').text('');
                $('#spanApprovedBudget').hide();
                return true;
            }
        });

        $("#ReleasedBudget").on('change', function ()
        {
                var _ApprovedBudget = $('#ApprovedBudget').val();
                var _ReleasedBudget = $('#ReleasedBudget').val();
                if (_ReleasedBudget > _ApprovedBudget) {
                    $('#spanReleasedBudget').text(' Released Budget Should not be greater then Approved Budget');
                    $('#spanReleasedBudget').show();
                    $('#spanReleasedBudget').focus();
                    return true;
                } else {
                    $('#spanReleasedBudget').text('');
                    $('#spanReleasedBudget').hide();
                    return true;
                }
        });

        $("#btnCreate").click(function (e) {
            e.preventDefault();
            debugger;

            if ($('#ProjectName').val() == '') {
                $('#spanProjectName').text('Please Fill This Field');
                $('#ProjectName').focus();
                return true;
            }
            if ($('#Category_ID').val() == '') {
                $('#spanCategory_ID').text('Please Fill This Field');
                $('#Category_ID').focus();
                return true;
            }
            if ($('#ProjectType_ID').val() == '') {
                $('#spanProjectType_ID').text('Please Fill This Field');
                $('#ProjectType_ID').focus();
                return true;
            }
            if ($('#Funding_SourceArray').val() == '') {
                $('#spanFunding_SourceArray').text('Please Fill This Field');
                $('#Funding_SourceArray').focus();
                return true;
            }
            if ($('#City_ID').val() == '') {
                $('#spanCity_ID').text('Please Fill This Field');
                $('#City_ID').focus();
                return true;
            }
            if ($('#DigitalPolicy_ID').val() == '') {
                $('#spanDigitalPolicy_ID').text('Please Fill This Field');
                $('#DigitalPolicy_ID').focus();
                return true;
            }
            //if ($('#MaleBeneficiary').val() == '' || $('#MaleBeneficiary').val() == 0) {
            //    if ($('#MaleBeneficiary').val() == 0) {
            //        $('#spanMaleBeneficiary').text('0 Value is not allowed');
            //        $('#MaleBeneficiary').focus();
            //        return true;
            //    }
            //    $('#spanMaleBeneficiary').text('Please Fill This Field');
            //    $('#MaleBeneficiary').focus();
            //    return true;
            //}
            //if ($('#FemaleBeneficiary').val() == '' || $('#FemaleBeneficiary').val() == 0) {
            //    if ($('#FemaleBeneficiary').val() == 0) {
            //        $('#spanFemaleBeneficiary').text('0 Value is not allowed');
            //        $('#FemaleBeneficiary').focus();
            //        return true;
            //    }
            //    $('#spanFemaleBeneficiary').text('Please Fill This Field');
            //    $('#FemaleBeneficiary').focus();
            //    return true;
            //}
            //if ($('#TotalBeneficiary').val() == '' || $('#TotalBeneficiary').val() == 0) {
            //    if ($('#TotalBeneficiary').val() == 0) {
            //        $('#spanTotalBeneficiary').text('0 Value is not allowed');
            //        $('#TotalBeneficiary').focus();
            //        return true;
            //    }
            //    $('#spanTotalBeneficiary').text('Please Fill This Field');
            //    $('#TotalBeneficiary').focus();
            //    return true;
            //}
            //if ($('#TotalBeneficiary').val() == '' || $('#TotalBeneficiary').val() == 0) {
            //    if ($('#TotalBeneficiary').val() == 0) {
            //        $('#spanTotalBeneficiary').text('0 Value is not allowed');
            //        $('#TotalBeneficiary').focus();
            //        return true;
            //    }
            //    $('#spanTotalBeneficiary').text('Please Fill This Field');
            //    $('#TotalBeneficiary').focus();
            //    return true;
            //}

            //if ($('#CostPerBeneficiary').val() == '' || $('#CostPerBeneficiary').val() == 0) {
            //    if ($('#CostPerBeneficiary').val() == 0) {
            //        $('#spanCostPerBeneficiary').text('0 Value is not allowed');
            //        $('#CostPerBeneficiary').focus();
            //        return true;
            //    }
            //    $('#spanCostPerBeneficiary').text('Please Fill This Field');
            //    $('#CostPerBeneficiary').focus();
            //    return true;
            //}
            if ($('#Objective').val() == '') {
                $('#spanObjective').text('Please Fill This Field');
                $('#Objective').focus();
                return true;
            }
            if ($('#PlannedDate').val() == '') {
                $('#spanPlannedDate').text('Please Fill This Field');
                $('#PlannedDate').focus();
                return true;
            }
            if ($('#StartDate').val() == '') {
                $('#spanStartDate').text('Please Fill This Field');
                $('#StartDate').focus();
                return true;
            }
            if ($('#EndDate').val() == '') {
                $('#spanEndDate').text('Please Fill This Field');
                $('#EndDate').focus();
                return true;
            }
            if ($('#PlannedHR').val() == '' || $('#PlannedHR').val() == 0) {
                $('#spanPlannedHR').text('Please Fill This Field');
                $('#PlannedHR').focus();
                return true;
            }
            if ($('#RecruitedHRPercent').val() == '' || $('#RecruitedHRPercent').val() == 0) {
                $('#spanRecruitedHRPercent').text('Please Fill This Field');
                $('#RecruitedHRPercent').focus();
                return true;
            }
            if ($('#PlannedBudget').val() == '' || $('#PlannedBudget').val() == 0) {
                $('#spanPlannedBudget').text('Please Fill This Field');
                $('#PlannedBudget').focus();
                return true;
            }
            if ($('#ApprovedBudget').val() == '' || $('#ApprovedBudget').val() == 0) {
                $('#spanApprovedBudget').text('Please Fill This Field');
                $('#ApprovedBudget').focus();
                return true;
            }
            if ($('#ReleasedBudget').val() == '' || $('#ReleasedBudget').val() == 0) {
                $('#spanReleasedBudget').text('Please Fill This Field');
                $('#ReleasedBudget').focus();
                return true;
            }
            if ($('#PlannedProcurement').val() == '' || $('#PlannedProcurement').val() == 0) {
                $('#spanPlannedProcurement').text('Please Fill This Field');
                $('#PlannedProcurement').focus();
                return true;
            }
            if ($('#AchievedProcurement').val() == '' || $('#AchievedProcurement').val() == 0) {
                $('#spanAchievedProcurement').text('Please Fill This Field');
                $('#AchievedProcurement').focus();
                return true;
            }
            if ($('#ProcurementPercent').val() == '' || $('#ProcurementPercent').val() == 0) {
                $('#spanProcurementPercent').text('Please Fill This Field');
                $('#ProcurementPercent').focus();
                return true;
            }
            if ($('#ProcurementPercent').val() == '') {
                $('#spanProcurementPercent').text('Please Fill This Field');
                $('#ProcurementPercent').focus();
                return true;
            }

            //Risk
            //if ($('#idRiskName').val() == "") {
            //    $('#spanidRiskName').text('Risk Name should not be blank');
            //    $('#spanidRiskName').show();
            //    $('#idRiskName').focus();
            //    return true;
            //}
            //if ($('#idRiskStatus').val() == 0) {
            //    $('#spanidRiskStatus').text('Risk Status should not be blank');
            //    $('#spanidRiskStatus').show();
            //    $('#ididRiskStatus').focus();
            //    return true;
            //}

            ////StackHolder
            //if ($('#idStackholderName').val() == "") {
            //    $('#spanidStackholderName').text('Stackholder Name should not be blank');
            //    $('#spanidStackholderName').show();
            //    $('#idStackholderName').focus();
            //    return true;
            //}
            //if ($('#idDepartmentName').val() == "") {
            //    $('#spanidDepartmentName').text('Department Name should not be blank');
            //    $('#spanidDepartmentName').show();
            //    $('#idDepartmentName').focus();
            //    return true;
            //} if ($('#idContactNo').val() == "") {
            //    $('#spanidContactNo').text('Contact No should not be blank');
            //    $('#spanidContactNo').show();
            //    $('#idContactNo').focus();
            //    return true;
            //} if ($('#idEmail').val() == "") {
            //    $('#spanidEmail').text('Email should not be blank');
            //    $('#spanidEmail').show();
            //    $('#idEmail').focus();
            //    return true;
            //}

          /*  var a = validationBeforeSubmit();*/

            var formAllData = new FormData();

            formAllData.append('txtCategory_ID', $("#Category_ID").val());
            formAllData.append('txtProjectType_ID', $("#ProjectType_ID").val());
            formAllData.append('txtDigitalPolicy_ID', $("#DigitalPolicy_ID").val());
            formAllData.append('txtCity_ID', $("#City_ID").val());
            formAllData.append('txtProjectName', $("#ProjectName").val());
            formAllData.append('txtMaleBeneficiary', $("#MaleBeneficiary").val());
            formAllData.append('txtFemaleBeneficiary', $("#FemaleBeneficiary").val());
            formAllData.append('txtTotalBeneficiary', $("#TotalBeneficiary").val());
            formAllData.append('txtCostPerBeneficiary', $("#CostPerBeneficiary").val());
            formAllData.append('txtObjective', $("#Objective").val());
            formAllData.append('txtPlannedDate', $("#PlannedDate").val());
            formAllData.append('txtStartDate', $("#StartDate").val());
            formAllData.append('txtEndDate', $("#EndDate").val());
            formAllData.append('txtPlannedHR', $("#PlannedHR").val());
            formAllData.append('txtRecruitedHR', $("#RecruitedHR").val());
            formAllData.append('txtRecruitedHRPercent', $("#RecruitedHRPercent").val());
            formAllData.append('txtPlannedBudget', $("#PlannedBudget").val());
            formAllData.append('txtApprovedBudget', $("#ApprovedBudget").val());
            formAllData.append('txtReleasedBudget', $("#ReleasedBudget").val());
            formAllData.append('txtPlannedProcurement', $("#PlannedProcurement").val());
            formAllData.append('txtAchievedProcurement', $("#AchievedProcurement").val());
            formAllData.append('txtProcurementPercent', $("#ProcurementPercent").val());
            formAllData.append('FundingSourceArray', $("#Funding_SourceArray").val());

            //Risk
            var RiskRows = new Array();   //ArrayList
            $('#tblRisk tr').each(function ()
            {
                if ($(this).find('td:eq(0)').text() != '')
                {
                    //Risk
                    debugger;
                    $RiskRow = $(this).find('td:eq(0)').text() +
                                "|" + $(this).find('td:eq(1)').text() +
                                "|" + $(this).find('td:eq(2)').attr('id');
                    RiskRows.push($RiskRow);
                }
            });
            formAllData.append("_RiskRows", RiskRows);

            //StackHolder
            var StackholderRows = new Array();   //ArrayList
            $('#tblStackHolder tr').each(function () {
                if ($(this).find('td:eq(0)').text() != '') {
                    //Risk
                    debugger;
                    $StackholderRow = $(this).find('td:eq(0)').text() +
                        "|" + $(this).find('td:eq(1)').text() +
                        "|" + $(this).find('td:eq(2)').text() +
                        "|" + $(this).find('td:eq(3)').text() +
                        "|" + $(this).find('td:eq(4)').text();
                    StackholderRows.push($StackholderRow);
                }
            });
            formAllData.append("_StackholderRows", StackholderRows);
           //var model = formAllData;
           //url: '/Project/ProjectCreate?ProjectVM=' + model
          /*  $("#SubmitFromBtnCreate").submit();*/
            var urllink = '@Url.Action("ProjectCreate", "Project")'
            $.ajax({
                url: urllink,
                type: "POST",
                contentType: false, // Not to set any content header
                processData: false, // Not to process data
                data: formAllData,
                success: function (result) {
                    debugger;
                    if (result == 'false') {
                       var route = '@Url.Action("ProjectCreate", "Project")'
                         window.location.href = route;
                    }
                    else if (result == 'true') {
                         var route = '@Url.Action("ProjectView", "Project")'
                         window.location.href = route;
                    }

                },
                error: function (err) {
                    //For Failure notification
                    alert(err.statusText);
                }
            });

        });


        //CustomFuncation
        function Uvalid() {
            debugger;
                         //HR-recruitment
                         var _PlannedHR = $('#PlannedHR').val();
                         var _RecruitedHR = $('#RecruitedHR').val();

                        //Procurement
                         var _PlannedProcurement = $('#PlannedProcurement').val();
                         var _AchievedProcurement = $('#AchievedProcurement').val();

                        if (_RecruitedHR > _PlannedHR) { //HR-recruitment
                             debugger;
                             $('#spanRecruitedHR').text('Recruited-HR Should not be greater then Planned-HR');
                             $('#spanRecruitedHR').show();
                             $('#RecruitedHR').focus();
                             return true;
                        }
                        else if (_AchievedProcurement > _PlannedProcurement) {//Procurement
                            debugger;
                            $('#spanAchievedProcurement').text('Achieved Procurement Should not be greater then Planned Procurement');
                            $('#spanAchievedProcurement').show();
                            $('#AchievedProcurement').focus();
                            return true;
                        }
                        else { //HR-recruitment   ,Procurement
                             $('#spanRecruitedHR').text('');
                            $('#spanRecruitedHR').hide();

                            $('#spanAchievedProcurement').text('');
                            $('#spanAchievedProcurement').hide();
                             return true;
                            }

        }
        function Uchange() {
            debugger;
            //HR-recruitment
            var _PlannedHR = $('#PlannedHR').val();
            var _RecruitedHR = $('#RecruitedHR').val();
            var _RecruitedHRPercent = 0;
            _RecruitedHRPercent = _RecruitedHR / _PlannedHR * 100;
            $('#RecruitedHRPercent').val(_RecruitedHRPercent);


            //Procurement
            var _PlannedProcurement = $('#PlannedProcurement').val();
            var _AchievedProcurement = $('#AchievedProcurement').val();
            var _ProcurementPercent = 0;
            _ProcurementPercent = _AchievedProcurement / _PlannedProcurement * 100;
            $('#ProcurementPercent').val(_ProcurementPercent);
        }



    </script>
}

